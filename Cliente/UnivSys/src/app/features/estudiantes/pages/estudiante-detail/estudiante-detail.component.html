<div *ngIf="estudiante$ | async as est; else loading" class="detail-container">
  
  <div class="flex justify-between items-start mb-6 pb-4 border-b border-gray-200">
    <div>
      <h1 class="text-4xl font-bold text-slate-800 flex items-center gap-4">
        {{ est.nombres }} {{ est.apellidoPaterno }} {{ est.apellidoMaterno }}
        <span *ngIf="est.esBecado" class="px-3 py-1 text-sm font-semibold rounded-full bg-blue-100 text-blue-800">Becado</span>
        <span *ngIf="est.esEgresado" class="px-3 py-1 text-sm font-semibold rounded-full bg-teal-100 text-teal-800">Egresado</span>
      </h1>
      <p class="text-xl text-indigo-600 font-medium">{{ est.idEstudiante }}</p>
    </div>
    <a [routerLink]="['/estudiantes', est.idEstudiante, 'editar']" 
       class="flex items-center py-2 px-4 rounded-lg font-semibold text-white shadow-md
              bg-indigo-600 hover:bg-indigo-700
              transition-all duration-300 ease-in-out
              transform hover:scale-105">
      <span class="mr-2">✏️</span>
      Editar
    </a>
  </div>

  <div class_ ="grid grid-cols-1 md:grid-cols-3 gap-8">
    
    <div class="md:col-span-2 space-y-6">
      <div class="detail-item">
        <span class="detail-label">Nombre Completo: </span>
        <span class="detail-value">{{ est.nombres }} {{ est.apellidoPaterno }} {{ est.apellidoMaterno }}</span>
      </div>
      <div class="detail-item">
        <span class="detail-label">Carrera: </span>
        <span class="detail-value">{{ est.nombreCarrera }}</span> </div>
      <div class="detail-item">
        <span class="detail-label">Semestre Actual: </span>
        <span class="detail-value">{{ est.semestre }}</span>
      </div>
    </div>
    
    <div class="md:col-span-1 space-y-6 bg-slate-50 p-6 rounded-lg">
      <h4 class="text-lg font-semibold text-slate-700 border-b pb-2">Estatus Detallado</h4>

      <div *ngIf="est.esBecado" class="detail-item">
         <span class="detail-label text-blue-700">Detalle Beca</span>
         <span class="detail-value text-blue-900">{{ est.porcentajeBeca || est.detalleBeca?.porcentaje }}%</span>
      </div>

      <div *ngIf="est.esEgresado" class="detail-item">
         <span class="detail-label text-teal-700">Detalle Egreso</span>
         <span class="detail-value text-teal-900">{{ (est.fechaEgreso || est.detalleEgreso?.fechaTitulacion) | date:'fullDate' }}</span>
      </div>

      <div *ngIf="!est.esBecado && !est.esEgresado" class="detail-item">
         <span class="detail-label">Estatus: </span>
         <span class="detail-value text-slate-600">Estudiante Regular</span>
      </div>
    </div>
    
  </div>
</div>

<ng-template #loading>
  <p class="text-center text-slate-500">Cargando detalle del estudiante...</p>
</ng-template>